const asyncHandler = require("express-async-handler");
const User = require("../models/userModel");
const jwt = require("jsonwebtoken");
const bcrypt = require("bcryptjs");
const Token = require("../models/tokenModle");
const crypto = require("crypto");
const sendEmail = require("../utils/sendEmail");

const generatToken = (id) => {
  return jwt.sign({ id }, process.env.JWT_SECRET, { expiresIn: "1d" });
};

// Register User
const registerUser = asyncHandler(async (req, res) => {
  const { name, email, password } = req.body;

  if (!name || !email || !password) {
    res.status(400);
    throw new Error("Please fill in all required fields");
  }
  if (password.length < 6) {
    res.status(400);
    throw new Error("Password must be up to 6 characters");
  }

  const userExists = await User.findOne({ email });

  if (userExists) {
    res.status(409);
    throw new Error("You cannot use this email");
  }

  //Create new user
  const user = await User.create({
    name,
    email,
    password,
  });

  // Generate Token
  const token = generatToken(user._id);

  // Send Http
  res.cookie("token", token, {
    path: "/",
    httpOnly: true,
    expires: new Date(Date.now() + 1000 * 86400), // 1 day
    smaeSite: "none",
    secure: true,
  });

  if (user) {
    const { _id, name, email, photo, phone, bio } = user;
    res.status(201).json({
      token,
    });
  } else {
    res.status(400);
    throw new Error("Invalid user data");
  }
});

// Login User
const loginUser = asyncHandler(async (req, res) => {
  const { email, password } = req.body;

  if (!email || !password) {
    res.status(400);
    throw new Error("Please add email and password!");
  }
  //check if user exists
  const user = await User.findOne({ email });

  if (!user) {
    res.status(401);
    throw new Error("User not found!, pleases singup");
  }

  //Check if password is correct
  const passewordIsCorrect = await bcrypt.compare(password, user.password);

  // Generate Token
  const token = generatToken(user._id);

  // Send Http
  res.cookie("token", token, {
    path: "/",
    httpOnly: true,
    expires: new Date(Date.now() + 1000 * 86400), // 1 day
    smaeSite: "none",
    secure: true,
  });

  if (user && passewordIsCorrect) {
    const { _id, name, email, photo, phone, bio } = user;
    res.status(200).json({
      token,
    });
  } else {
    res.status(400);
    throw new Error("Invalid email or password!");
  }
});
//Logout user

const logout = asyncHandler(async (req, res) => {
  res.cookie("token", "", {
    path: "/",
    httpOnly: true,
    expires: new Date(0),
    smaeSite: "none",
    secure: true,
  });
  return res.status(200).json({ message: "Successfully Logged Out" });
});
//Get User Data
const getUser = asyncHandler(async (req, res) => {
  const user = await User.findById(req.user._id);

  if (user) {
    const { _id, name, email, photo, phone, bio } = user;
    res.status(200).json({
      _id,
      name,
      email,
      photo,
      phone,
      bio,
    });
  } else {
    res.status(400);
    throw new Error("User Not Found!");
  }
});

//Get Login Status
const loggedinStatus = asyncHandler(async (req, res) => {
  const token = req.cookies.token;
  if (!token) {
    return res.json(false);
  }
  const verifed = jwt.verify(token, process.env.JWT_SECRET);
  if (verifed) {
    return res.json(true);
  }
  return res.json(false);
});
//Update User
const updateUser = asyncHandler(async (req, res) => {
  const user = await User.findById(req.user._id);

  if (user) {
    const { name, email, photo, phone, bio } = user;
    (user.email = email), (user.name = req.body.name || name);
    user.phone = req.body.phone || phone;
    user.bio = req.body.bio || bio;
    user.photo = req.body.photo || photo;

    const updateUser = await user.save();
    res.status(200).json({
      _id: updateUser._id,
      name: updateUser.name,
      email: updateUser.email,
      photo: updateUser.photo,
      phone: updateUser.phone,
      bio: updateUser.bio,
    });
  } else {
    res.status(404);
    throw new Error("User Ont Fuond");
  }
});
//Change Password
const changePassword = asyncHandler(async (req, res) => {
  
  const user = await User.findById(req.user._id);
  const { oldPassword, password } = req.body;

  if (!user) {
    res.status(404);
    throw new Error("User Ont Fuond, Please Signup");
  }
  // Valdidate
  if (!oldPassword || !password) {
    res.status(404);
    throw new Error("Please old and new password");
  }
  // Check if  old password matches password in BD
  const passewordIsCorrect = await bcrypt.compare(oldPassword, user.password);

  //Save new password
  if (user && passewordIsCorrect) {
    user.password = password;
    await user.save();
    res.status(200).send("Password change successful");
  } else {
    res.status(400);
    throw new Error("Old password is incorrect!");
  }
});

//Forgot Password
const forgotPassword = asyncHandler(async (req, res) => {
  const { email } = req.body;
  const user = await User.findOne({ email });

  if (!user) {
    res.status(404);
    throw new Error("User does not exist!");
  }
  //Delete token if it exists in DB
  let token = await Token.findOne({ userId: user._id });
  if (token) {
    await token.deleteOne();
  }
  //Creat Rest Token
  let resetToken = crypto.randomBytes(32).toString("hex") + user._id;
  console.log(resetToken);

  //Hass token before saving to  DB
  const hasedToken = crypto
    .createHash("sha256")
    .update(resetToken)
    .digest("hex");

  // Save token to DB
  await new Token({
    userId: user._id,
    token: hasedToken,
    createdAt: Date.now(),
    expiresAt: Date.now() + 30 * (60 * 1000), //30 minutes
  }).save();

  //Construct Rest Url
  const resetUrl = `${process.env.FRONTEND_URL}/resetpassword/${resetToken}`;

  //Reset Email
  const message = `<!DOCTYPE HTML
 
  <html"
    xmlns:o="urn:schemas-microsoft-com:office:office">
  
  <head>
  
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="x-apple-disable-message-reformatting">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge"><!--<![endif]-->
    <title>استعادة كلمة المرور</title>
  
    <style type="text/css">
      @media only screen and (min-width: 620px) {
        .u-row {
          width: 600px !important;
        }
  
        .u-row .u-col {
          vertical-align: top;
        }
  
        .u-row .u-col-50 {
          width: 300px !important;
        }
  
        .u-row .u-col-100 {
          width: 600px !important;
        }
  
      }
  
      @media (max-width: 620px) {
        .u-row-container {
          max-width: 100% !important;
          padding-left: 0px !important;
          padding-right: 0px !important;
        }
  
        .u-row .u-col {
          min-width: 320px !important;
          max-width: 100% !important;
          display: block !important;
        }
  
        .u-row {
          width: 100% !important;
        }
  
        .u-col {
          width: 100% !important;
        }
  
        .u-col>div {
          margin: 0 auto;
        }
      }
  
      body {
        margin: 0;
        padding: 0;
      }
  
      table,
      tr,
      td {
        vertical-align: top;
        border-collapse: collapse;
      }
  
      p {
        margin: 0;
      }
  
      .ie-container table,
      .mso-container table {
        table-layout: fixed;
      }
  
      * {
        line-height: inherit;
      }
  
      a[x-apple-data-detectors='true'] {
        color: inherit !important;
        text-decoration: none !important;
      }
  
      table,
      td {
        color: #0e67b4;
      }
  
      #u_body a {
        color: 0e67b4;
        text-decoration: underline;
      }
    </style>
  
  
  
  
    <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700&display=swap" rel="stylesheet" type="text/css">
  
  
  </head>
  
  <body class="clean-body u_body"
    style="margin: 0;padding: 0;-webkit-text-size-adjust: 100%;background-color: #f9f9f9;color: 0e67b4">
  
    <table id="u_body"
      style="border-collapse: collapse;table-layout: fixed;border-spacing: 0;mso-table-lspace: 0pt;mso-table-rspace: 0pt;vertical-align: top;min-width: 320px;Margin: 0 auto;background-color: #f9f9f9;width:100%"
      cellpadding="0" cellspacing="0">
      <tbody>
        <tr style="vertical-align: top">
          <td style="word-break: break-word;border-collapse: collapse !important;vertical-align: top">
            
  
  
  
            <div class="u-row-container" style="padding: 0px;background-color: #f9f9f9">
              <div class="u-row"
                style="margin: 0 auto;min-width: 320px;max-width: 600px;overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;background-color: #f9f9f9;">
                <div
                  style="border-collapse: collapse;display: table;width: 100%;height: 100%;background-color: transparent;">
                  
                  <div class="u-col u-col-100"
                    style="max-width: 320px;min-width: 600px;display: table-cell;vertical-align: top;">
                    <div style="height: 100%;width: 100% !important;">
                      <!--[if (!mso)&(!IE)]><!-->
                      <div
                        style="box-sizing: border-box; height: 100%; padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;">
                        
  
                        <table style="font-family:'Lato',sans-serif;" role="presentation" cellpadding="0" cellspacing="0"
                          width="100%" border="0">
                          <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                          width="100%" viewBox="0 0 1000 428" enable-background="new 0 0 1000 428" xml:space="preserve">
                       <path fill="#FFFFFF" opacity="1.000000" stroke="none" 
                         d="
                       M779.000000,429.000000 
                         C519.333313,429.000000 260.166656,429.000000 1.000000,429.000000 
                         C1.000000,286.333344 1.000000,143.666672 1.000000,1.000000 
                         C334.333344,1.000000 667.666687,1.000000 1001.000000,1.000000 
                         C1001.000000,143.666672 1001.000000,286.333344 1001.000000,429.000000 
                         C927.166687,429.000000 853.333313,429.000000 779.000000,429.000000 
                       M546.127991,384.106140 
                         C546.278259,384.229675 546.428528,384.353210 546.690491,385.209442 
                         C545.956543,389.269318 546.960999,391.442505 551.758179,389.733948 
                         C553.799133,373.142395 555.839233,356.557526 557.915649,339.677795 
                         C555.690063,339.677795 553.952759,339.677795 551.970398,339.677795 
                         C551.152344,345.722229 550.366577,351.528778 549.505737,357.889648 
                         C543.928589,353.584869 538.855774,353.398529 533.759888,357.080261 
                         C526.304199,362.466888 522.038635,375.857788 525.008850,384.500031 
                         C527.073364,390.506989 532.479492,392.994049 538.111694,389.975128 
                         C540.948181,388.454712 543.192566,385.829742 546.127991,384.106140 
                       M198.540634,176.964294 
                         C181.752457,218.899063 164.964264,260.833832 147.814941,303.670685 
                         C156.597504,303.670685 164.516663,303.670044 172.435837,303.670868 
                         C180.879227,303.671722 183.944122,301.585510 187.057556,293.606995 
                         C194.255722,275.160706 201.559891,256.753845 208.507782,238.213562 
                         C209.862152,234.599411 211.534561,233.481522 215.302536,233.496887 
                         C250.299973,233.639572 285.298706,233.664795 320.295654,233.472153 
                         C324.496307,233.449020 326.393463,234.736862 327.848145,238.615723 
                         C334.683380,256.841461 341.825226,274.952240 348.864960,293.101196 
                         C352.029297,301.259094 355.560486,303.665710 364.321899,303.670227 
                         C370.988190,303.673645 377.654602,303.699097 384.320587,303.655090 
                         C385.531647,303.647095 386.740784,303.351288 388.059448,303.173737 
                         C387.803040,302.126648 387.741730,301.624573 387.560181,301.170624 
                         C368.651215,253.895523 349.723450,206.627975 330.818970,159.351089 
                         C316.424469,123.352905 302.018341,87.359230 287.745544,51.312809 
                         C286.376923,47.856300 284.601379,46.516846 280.793243,46.647346 
                         C271.970795,46.949673 263.129730,46.820255 254.298706,46.693325 
                         C251.591019,46.654408 250.144501,47.549015 249.112366,50.148468 
                         C232.412796,92.206917 215.618317,134.227676 198.540634,176.964294 
                       M412.135345,255.561554 
                         C409.124420,260.347809 406.196899,265.189545 403.066620,269.896393 
                         C401.555298,272.168884 401.878082,273.741608 403.949219,275.387604 
                         C409.282135,279.625702 414.255493,284.373352 419.862518,288.199219 
                         C441.694214,303.095703 466.200745,307.864746 492.140717,305.920105 
                         C510.130341,304.571503 526.638611,298.750977 540.686829,287.070923 
                         C557.372803,273.197815 565.262085,254.800797 567.628052,233.663605 
                         C570.786499,205.446548 558.766235,182.728333 533.348694,170.080460 
                         C524.594788,165.724487 515.267761,162.510452 506.166473,158.864838 
                         C491.530090,153.002029 476.468414,148.025452 462.334473,141.139099 
                         C450.918976,135.577194 444.315765,125.562294 444.852997,112.033020 
                         C445.440247,97.244270 451.462067,85.615845 465.003998,78.848557 
                         C481.060364,70.824722 497.936310,70.447273 514.463684,76.476845 
                         C523.559265,79.795113 531.774719,85.535774 540.365662,90.223511 
                         C546.024963,93.311584 550.002441,92.722427 553.169556,87.437912 
                         C556.469177,81.932343 559.154663,76.058678 562.094788,70.372772 
                         C559.616333,68.184868 557.520081,66.292847 555.373657,64.459496 
                         C554.490051,63.704742 553.499878,63.074543 552.555969,62.390614 
                         C531.116882,46.855888 506.800446,41.800419 481.048615,44.498489 
                         C450.236267,47.726757 426.647339,62.240566 416.083160,92.715790 
                         C406.896057,119.218346 412.109650,155.037476 445.477081,171.867142 
                         C456.107880,177.229065 467.687073,180.724182 478.870056,184.974167 
                         C490.826202,189.518005 503.069183,193.401123 514.729187,198.599472 
                         C523.569519,202.540787 530.374390,209.363174 533.517944,218.952789 
                         C539.431763,236.993347 531.779297,259.246399 515.413696,268.854431 
                         C493.427124,281.762421 470.694977,279.917145 448.494751,269.348022 
                         C440.924866,265.744141 434.323212,260.083130 427.344788,255.267014 
                         C420.921295,250.833847 418.153015,250.725586 412.135345,255.561554 
                       M614.704956,243.907089 
                         C639.976501,243.907089 665.248047,243.907089 690.998962,243.907089 
                         C690.355652,245.676422 689.971497,246.917847 689.462219,248.105591 
                         C682.775696,263.698639 676.074219,279.285278 669.370544,294.870972 
                         C666.656616,301.180756 668.162231,303.677246 674.943359,303.684357 
                         C710.107178,303.721191 745.270935,303.722900 780.434753,303.680695 
                         C786.603088,303.673309 788.232117,301.141663 785.823669,295.452301 
                         C781.152039,284.416687 776.381470,273.423004 771.668823,262.404724 
                         C769.098389,256.394775 766.562622,250.369949 763.822632,243.906937 
                         C789.973755,243.906937 815.298218,243.908875 840.622681,243.905930 
                         C850.331848,243.904800 855.007996,239.273209 855.010010,229.563995 
                         C855.021362,173.901871 855.020264,118.239761 855.010742,62.577644 
                         C855.009094,52.992672 850.253174,48.264809 840.512817,48.197277 
                         C832.513855,48.141815 824.514160,48.185703 816.514832,48.185734 
                         C749.353638,48.186012 682.192444,48.178394 615.031250,48.195263 
                         C605.060364,48.197765 599.879333,52.834164 599.871460,62.008244 
                         C599.823547,118.003624 599.824646,173.999084 599.870422,229.994476 
                         C599.877869,239.078583 604.728577,243.784760 614.704956,243.907089 
                       M415.623016,382.068115 
                         C416.107697,384.670227 416.592377,387.272339 417.342896,391.301727 
                         C419.811188,390.019897 422.718872,389.509155 423.407043,387.991760 
                         C428.199768,377.424652 432.532318,366.648834 437.058350,355.829956 
                         C433.227295,354.272247 431.314728,355.548584 430.029266,359.045776 
                         C427.374756,366.267365 424.423645,373.379944 421.594543,380.537354 
                         C419.264191,373.748566 418.259735,367.079926 416.830963,360.503448 
                         C416.417053,358.598267 414.786377,356.957458 413.713531,355.195435 
                         C412.186432,356.651611 410.062042,357.831146 409.237152,359.612518 
                         C405.915314,366.785767 402.994995,374.144958 399.396576,382.694061 
                         C398.166138,374.120453 396.939240,366.984100 396.183044,359.798157 
                         C395.692322,355.134766 393.568970,354.360443 389.471863,355.844818 
                         C391.501160,367.358856 393.486786,378.625214 395.458649,389.813416 
                         C399.134521,391.011261 401.286926,390.305542 402.647034,386.609650 
                         C404.770538,380.839355 407.409180,375.257629 409.863922,369.610931 
                         C410.446960,368.269806 411.166229,366.987946 412.417175,364.493988 
                         C413.607635,371.128418 414.515472,376.187622 415.623016,382.068115 
                       M481.796356,354.381989 
                         C482.333405,349.502533 482.870453,344.623108 483.407501,339.743652 
                         C482.931244,339.343597 482.455017,338.943542 481.978790,338.543488 
                         C480.375427,339.756348 477.551331,340.799591 477.355652,342.208038 
                         C475.160400,358.008545 473.369751,373.865234 471.310516,391.039032 
                         C474.142029,389.889618 476.107025,389.091919 478.417328,388.154083 
                         C485.340637,393.014496 491.602142,392.136536 497.289124,384.827545 
                         C502.256744,378.443054 503.974976,371.075134 502.758026,363.163757 
                         C501.506012,355.024353 494.307831,351.953430 487.480560,356.559540 
                         C485.243530,358.068787 483.365845,360.110748 480.723267,362.438019 
                         C481.117920,359.502350 481.404175,357.372833 481.796356,354.381989 
                       M740.279175,377.656158 
                         C740.804138,372.903992 742.108643,368.080933 741.684143,363.415161 
                         C740.912842,354.936401 733.320374,351.822418 726.299011,356.699768 
                         C724.057373,358.256897 722.178101,360.335602 719.931335,362.357117 
                         C719.754700,361.469574 719.599915,361.002319 719.578125,360.528931 
                         C719.479736,358.389771 720.858887,355.430878 717.035950,355.242462 
                         C713.083252,355.047729 714.359924,358.382385 714.100342,360.335846 
                         C712.476318,372.556274 711.017212,384.798706 709.521912,397.036102 
                         C709.330750,398.600372 709.246399,400.177673 709.111023,401.766205 
                         C711.393494,401.766205 713.021606,401.766205 714.887390,401.766205 
                         C715.524353,397.169739 716.134644,392.766144 716.762024,388.238892 
                         C725.272766,392.523590 730.113403,391.991821 735.274475,385.963898 
                         C737.189697,383.727051 738.453247,380.932159 740.279175,377.656158 
                       M678.322083,362.915558 
                         C677.087463,367.843719 675.148682,372.723907 674.808716,377.713013 
                         C674.440735,383.114349 676.928223,387.875671 682.371460,390.109589 
                         C687.997009,392.418304 693.264465,391.183838 697.728821,387.288422 
                         C703.984680,381.829834 706.217651,374.648987 705.264893,366.578003 
                         C703.978577,355.681976 693.068298,350.834656 684.045593,357.107147 
                         C682.039429,358.501862 680.498535,360.565918 678.322083,362.915558 
                       M457.122223,385.136505 
                         C454.841064,385.413055 452.483154,386.193298 450.294922,385.859894 
                         C445.922607,385.193817 444.485748,381.769897 444.379578,377.794525 
                         C444.267822,373.607208 447.851044,375.268890 449.896088,374.601257 
                         C453.671661,373.368652 457.682617,372.682953 461.233643,371.004059 
                         C463.261139,370.045502 465.247955,367.843018 466.083191,365.736725 
                         C468.636292,359.298340 462.590210,353.477356 454.735626,354.494720 
                         C441.865326,356.161713 433.234467,375.413055 441.005371,385.889557 
                         C442.855469,388.383789 446.518066,390.360809 449.640656,390.911865 
                         C456.149048,392.060394 461.508942,389.188354 465.628326,384.003082 
                         C462.925934,381.459717 462.925934,381.459717 457.122223,385.136505 
                       M755.462219,357.871216 
                         C749.256531,363.102509 746.786377,369.961761 747.098389,377.857300 
                         C747.492981,387.843170 755.065918,393.451355 764.609070,390.479462 
                         C768.213135,389.357086 771.363098,386.776794 774.691895,384.877136 
                         C772.381287,380.018585 770.385742,382.335510 768.384705,383.698029 
                         C764.707520,386.201782 760.396240,387.620453 756.789917,384.806519 
                         C754.460938,382.989197 753.627136,379.255646 751.706299,375.583557 
                         C754.908997,375.104523 756.567627,375.021057 758.130737,374.590668 
                         C762.277100,373.449005 766.515442,372.477478 770.465332,370.833344 
                         C774.216003,369.272125 775.861328,365.904083 775.287598,361.835083 
                         C774.732483,357.898071 772.011353,355.072998 768.354370,355.045898 
                         C764.258972,355.015564 760.151794,356.574036 755.462219,357.871216 
                       M584.995483,370.541107 
                         C588.860779,368.042694 590.306580,364.449280 588.741333,360.206726 
                         C587.167908,355.941803 583.229065,353.795349 579.148499,354.617401 
                         C574.976440,355.457855 570.479553,357.266937 567.332703,360.028442 
                         C562.229553,364.506744 560.718323,371.025269 560.984619,377.793335 
                         C561.375977,387.741486 568.903870,393.444366 578.415283,390.508636 
                         C582.028564,389.393372 585.196106,386.834198 588.676453,384.871277 
                         C586.023376,379.908386 583.984741,382.632355 581.913147,383.950531 
                         C578.152100,386.343628 574.073120,387.300629 570.192078,384.721680 
                         C566.977966,382.585907 566.643799,379.095947 567.111145,376.110809 
                         C573.301758,374.255066 578.832153,372.597198 584.995483,370.541107 
                       M652.033142,385.374146 
                         C652.034729,384.412720 652.376404,382.849243 651.965881,382.617279 
                         C651.152344,382.157593 649.782043,382.100220 648.896729,382.476288 
                         C647.240356,383.179932 645.820923,384.987885 644.203552,385.120056 
                         C641.073914,385.375854 637.184265,385.803741 634.906433,384.254150 
                         C632.771912,382.802063 632.313416,378.886261 631.145020,376.120026 
                         C637.596802,374.400848 642.837402,373.411987 647.764038,371.579285 
                         C652.902771,369.667755 655.033813,365.367340 653.932739,360.995667 
                         C652.919189,356.971710 648.283875,353.543365 643.380737,354.610870 
                         C639.379639,355.481964 635.159302,357.423126 632.109375,360.108673 
                         C627.289856,364.352264 625.795654,370.494690 625.848755,376.898376 
                         C625.944214,388.409698 635.188843,394.448212 645.746521,389.761536 
                         C647.830994,388.836212 649.601807,387.204102 652.033142,385.374146 
                       M602.698486,366.647980 
                         C602.159424,364.382080 601.402283,362.142212 601.127747,359.844666 
                         C600.595642,355.390656 598.297791,354.261902 593.852783,355.816223 
                         C596.667480,366.756165 599.384521,377.683197 602.343201,388.544434 
                         C603.033875,391.079956 607.317078,391.255188 608.619324,388.730682 
                         C614.238220,377.838409 619.650208,366.839417 625.193604,355.767426 
                         C621.317688,354.430359 619.235168,355.428192 617.693665,358.850311 
                         C614.207397,366.589417 610.358093,374.165009 606.274231,382.596222 
                         C604.982849,376.869843 603.922852,372.169647 602.698486,366.647980 
                       M659.328552,387.351440 
                         C659.132629,393.281830 663.012878,389.095825 665.136597,390.266632 
                         C667.207397,373.078217 669.204773,356.499146 671.225403,339.727478 
                         C668.847778,339.727478 667.112732,339.727478 665.231262,339.727478 
                         C663.275635,355.531433 661.358154,371.027039 659.328552,387.351440 
                       M795.561401,361.856110 
                         C797.610657,361.501953 799.659912,361.147766 801.843323,360.770386 
                         C802.058838,359.158875 802.270569,357.575989 802.494873,355.898956 
                         C796.582642,353.548187 794.076294,358.725586 790.008362,361.164612 
                         C789.722656,359.458679 789.849060,358.001465 789.213379,357.057373 
                         C788.610718,356.162445 787.235046,355.428680 786.149597,355.354706 
                         C785.511780,355.311279 784.269165,356.626556 784.162537,357.443451 
                         C782.752869,368.245850 781.496765,379.068237 780.182495,390.050842 
                         C782.405945,390.050842 784.151367,390.050842 786.151611,390.050842 
                         C786.750671,385.219482 787.237427,380.613983 787.911194,376.036041 
                         C788.700623,370.672333 790.334839,365.677795 795.561401,361.856110 
                       z"/>
                       <path fill="#1169B5" opacity="1.000000" stroke="none" 
                         d="
                       M198.692993,176.610626 
                         C215.618317,134.227676 232.412796,92.206917 249.112366,50.148468 
                         C250.144501,47.549015 251.591019,46.654408 254.298706,46.693325 
                         C263.129730,46.820255 271.970795,46.949673 280.793243,46.647346 
                         C284.601379,46.516846 286.376923,47.856300 287.745544,51.312809 
                         C302.018341,87.359230 316.424469,123.352905 330.818970,159.351089 
                         C349.723450,206.627975 368.651215,253.895523 387.560181,301.170624 
                         C387.741730,301.624573 387.803040,302.126648 388.059448,303.173737 
                         C386.740784,303.351288 385.531647,303.647095 384.320587,303.655090 
                         C377.654602,303.699097 370.988190,303.673645 364.321899,303.670227 
                         C355.560486,303.665710 352.029297,301.259094 348.864960,293.101196 
                         C341.825226,274.952240 334.683380,256.841461 327.848145,238.615723 
                         C326.393463,234.736862 324.496307,233.449020 320.295654,233.472153 
                         C285.298706,233.664795 250.299973,233.639572 215.302536,233.496887 
                         C211.534561,233.481522 209.862152,234.599411 208.507782,238.213562 
                         C201.559891,256.753845 194.255722,275.160706 187.057556,293.606995 
                         C183.944122,301.585510 180.879227,303.671722 172.435837,303.670868 
                         C164.516663,303.670044 156.597504,303.670685 147.814941,303.670685 
                         C164.964264,260.833832 181.752457,218.899063 198.692993,176.610626 
                       M272.348297,94.124573 
                         C271.107300,90.080818 269.866272,86.037071 268.603058,81.920921 
                         C252.542786,123.872910 236.597107,165.525543 220.453720,207.694687 
                         C252.503113,207.694687 283.683350,207.694687 315.768188,207.694687 
                         C313.494537,201.661163 311.487518,196.264603 309.430176,190.887283 
                         C297.182068,158.873810 284.922333,126.864777 272.348297,94.124573 
                       z"/>
                       <path fill="#1068B5" opacity="1.000000" stroke="none" 
                         d="
                       M412.382080,255.285568 
                         C418.153015,250.725586 420.921295,250.833847 427.344788,255.267014 
                         C434.323212,260.083130 440.924866,265.744141 448.494751,269.348022 
                         C470.694977,279.917145 493.427124,281.762421 515.413696,268.854431 
                         C531.779297,259.246399 539.431763,236.993347 533.517944,218.952789 
                         C530.374390,209.363174 523.569519,202.540787 514.729187,198.599472 
                         C503.069183,193.401123 490.826202,189.518005 478.870056,184.974167 
                         C467.687073,180.724182 456.107880,177.229065 445.477081,171.867142 
                         C412.109650,155.037476 406.896057,119.218346 416.083160,92.715790 
                         C426.647339,62.240566 450.236267,47.726757 481.048615,44.498489 
                         C506.800446,41.800419 531.116882,46.855888 552.555969,62.390614 
                         C553.499878,63.074543 554.490051,63.704742 555.373657,64.459496 
                         C557.520081,66.292847 559.616333,68.184868 562.094788,70.372772 
                         C559.154663,76.058678 556.469177,81.932343 553.169556,87.437912 
                         C550.002441,92.722427 546.024963,93.311584 540.365662,90.223511 
                         C531.774719,85.535774 523.559265,79.795113 514.463684,76.476845 
                         C497.936310,70.447273 481.060364,70.824722 465.003998,78.848557 
                         C451.462067,85.615845 445.440247,97.244270 444.852997,112.033020 
                         C444.315765,125.562294 450.918976,135.577194 462.334473,141.139099 
                         C476.468414,148.025452 491.530090,153.002029 506.166473,158.864838 
                         C515.267761,162.510452 524.594788,165.724487 533.348694,170.080460 
                         C558.766235,182.728333 570.786499,205.446548 567.628052,233.663605 
                         C565.262085,254.800797 557.372803,273.197815 540.686829,287.070923 
                         C526.638611,298.750977 510.130341,304.571503 492.140717,305.920105 
                         C466.200745,307.864746 441.694214,303.095703 419.862518,288.199219 
                         C414.255493,284.373352 409.282135,279.625702 403.949219,275.387604 
                         C401.878082,273.741608 401.555298,272.168884 403.066620,269.896393 
                         C406.196899,265.189545 409.124420,260.347809 412.382080,255.285568 
                       z"/>
                       <path fill="#166CB6" opacity="1.000000" stroke="none" 
                         d="
                       M614.238098,243.907318 
                         C604.728577,243.784760 599.877869,239.078583 599.870422,229.994476 
                         C599.824646,173.999084 599.823547,118.003624 599.871460,62.008244 
                         C599.879333,52.834164 605.060364,48.197765 615.031250,48.195263 
                         C682.192444,48.178394 749.353638,48.186012 816.514832,48.185734 
                         C824.514160,48.185703 832.513855,48.141815 840.512817,48.197277 
                         C850.253174,48.264809 855.009094,52.992672 855.010742,62.577644 
                         C855.020264,118.239761 855.021362,173.901871 855.010010,229.563995 
                         C855.007996,239.273209 850.331848,243.904800 840.622681,243.905930 
                         C815.298218,243.908875 789.973755,243.906937 763.822632,243.906937 
                         C766.562622,250.369949 769.098389,256.394775 771.668823,262.404724 
                         C776.381470,273.423004 781.152039,284.416687 785.823669,295.452301 
                         C788.232117,301.141663 786.603088,303.673309 780.434753,303.680695 
                         C745.270935,303.722900 710.107178,303.721191 674.943359,303.684357 
                         C668.162231,303.677246 666.656616,301.180756 669.370544,294.870972 
                         C676.074219,279.285278 682.775696,263.698639 689.462219,248.105591 
                         C689.971497,246.917847 690.355652,245.676422 690.998962,243.907089 
                         C665.248047,243.907089 639.976501,243.907089 614.238098,243.907318 
                       M615.736450,56.841923 
                         C608.993103,56.968838 608.279541,57.657333 608.278564,64.343941 
                         C608.270691,118.491119 608.273621,172.638306 608.275513,226.785477 
                         C608.275757,234.919022 608.926147,235.585281 617.111145,235.567474 
                         C662.090393,235.469620 707.069641,235.295776 752.048889,235.274506 
                         C780.866821,235.260895 809.684814,235.477173 838.502869,235.564514 
                         C845.820923,235.586685 846.760864,234.596603 846.761414,227.149841 
                         C846.765503,173.169266 846.764648,119.188690 846.762695,65.208115 
                         C846.762390,57.517384 846.108276,56.843624 838.601013,56.843361 
                         C764.627625,56.840755 690.654297,56.841782 615.736450,56.841923 
                       M700.551575,244.520355 
                         C693.297424,261.160645 686.043274,277.800903 678.706604,294.630432 
                         C711.670532,294.630432 743.689392,294.630432 776.201233,294.630432 
                         C769.185547,278.223572 762.450806,262.310059 755.479736,246.500763 
                         C754.956177,245.313324 752.751038,244.194061 751.319031,244.183273 
                         C734.656799,244.057587 717.992859,244.151169 700.551575,244.520355 
                       z"/>
                       <path fill="#1E71B9" opacity="1.000000" stroke="none" 
                         d="
                       M415.523163,381.657471 
                         C414.515472,376.187622 413.607635,371.128418 412.417175,364.493988 
                         C411.166229,366.987946 410.446960,368.269806 409.863922,369.610931 
                         C407.409180,375.257629 404.770538,380.839355 402.647034,386.609650 
                         C401.286926,390.305542 399.134521,391.011261 395.458649,389.813416 
                         C393.486786,378.625214 391.501160,367.358856 389.471863,355.844818 
                         C393.568970,354.360443 395.692322,355.134766 396.183044,359.798157 
                         C396.939240,366.984100 398.166138,374.120453 399.396576,382.694061 
                         C402.994995,374.144958 405.915314,366.785767 409.237152,359.612518 
                         C410.062042,357.831146 412.186432,356.651611 413.713531,355.195435 
                         C414.786377,356.957458 416.417053,358.598267 416.830963,360.503448 
                         C418.259735,367.079926 419.264191,373.748566 421.594543,380.537354 
                         C424.423645,373.379944 427.374756,366.267365 430.029266,359.045776 
                         C431.314728,355.548584 433.227295,354.272247 437.058350,355.829956 
                         C432.532318,366.648834 428.199768,377.424652 423.407043,387.991760 
                         C422.718872,389.509155 419.811188,390.019897 417.342896,391.301727 
                         C416.592377,387.272339 416.107697,384.670227 415.523163,381.657471 
                       z"/>
                       <path fill="#1D70B8" opacity="1.000000" stroke="none" 
                         d="
                       M545.704712,383.704254 
                         C543.192566,385.829742 540.948181,388.454712 538.111694,389.975128 
                         C532.479492,392.994049 527.073364,390.506989 525.008850,384.500031 
                         C522.038635,375.857788 526.304199,362.466888 533.759888,357.080261 
                         C538.855774,353.398529 543.928589,353.584869 549.505737,357.889648 
                         C550.366577,351.528778 551.152344,345.722229 551.970398,339.677795 
                         C553.952759,339.677795 555.690063,339.677795 557.915649,339.677795 
                         C555.839233,356.557526 553.799133,373.142395 551.758179,389.733948 
                         C546.960999,391.442505 545.956543,389.269318 546.749023,384.587280 
                         C546.742004,383.684662 546.676392,383.404144 546.610779,383.123657 
                         C546.308777,383.317169 546.006714,383.510712 545.704712,383.704254 
                       M547.134888,374.293579 
                         C547.658997,371.543060 548.089111,368.770416 548.730469,366.047485 
                         C549.579712,362.442017 547.658142,360.201660 544.610229,360.090576 
                         C541.750732,359.986359 538.018127,360.578461 536.099426,362.383728 
                         C530.830750,367.340820 529.343994,374.031982 530.690674,381.092743 
                         C531.660583,386.178009 536.078613,387.941437 539.899109,384.495178 
                         C542.747925,381.925476 544.583313,378.232330 547.134888,374.293579 
                       z"/>
                       <path fill="#1E71B9" opacity="1.000000" stroke="none" 
                         d="
                       M481.743408,354.812653 
                         C481.404175,357.372833 481.117920,359.502350 480.723267,362.438019 
                         C483.365845,360.110748 485.243530,358.068787 487.480560,356.559540 
                         C494.307831,351.953430 501.506012,355.024353 502.758026,363.163757 
                         C503.974976,371.075134 502.256744,378.443054 497.289124,384.827545 
                         C491.602142,392.136536 485.340637,393.014496 478.417328,388.154083 
                         C476.107025,389.091919 474.142029,389.889618 471.310516,391.039032 
                         C473.369751,373.865234 475.160400,358.008545 477.355652,342.208038 
                         C477.551331,340.799591 480.375427,339.756348 481.978790,338.543488 
                         C482.455017,338.943542 482.931244,339.343597 483.407501,339.743652 
                         C482.870453,344.623108 482.333405,349.502533 481.743408,354.812653 
                       M481.589905,368.326050 
                         C480.619354,372.158051 479.760345,376.022827 478.645813,379.812469 
                         C477.604248,383.353973 479.703735,384.783173 482.406006,385.666260 
                         C486.347229,386.954285 489.985718,385.774536 492.086029,382.438812 
                         C494.162262,379.141388 495.850677,375.350830 496.632782,371.554779 
                         C497.481659,367.434906 498.277527,362.144440 493.252014,360.137756 
                         C487.918457,358.008148 485.295715,362.679443 482.684662,366.359741 
                         C482.397675,366.764252 482.191711,367.226288 481.589905,368.326050 
                       z"/>
                       <path fill="#1D70B8" opacity="1.000000" stroke="none" 
                         d="
                       M740.146606,378.023956 
                         C738.453247,380.932159 737.189697,383.727051 735.274475,385.963898 
                         C730.113403,391.991821 725.272766,392.523590 716.762024,388.238892 
                         C716.134644,392.766144 715.524353,397.169739 714.887390,401.766205 
                         C713.021606,401.766205 711.393494,401.766205 709.111023,401.766205 
                         C709.246399,400.177673 709.330750,398.600372 709.521912,397.036102 
                         C711.017212,384.798706 712.476318,372.556274 714.100342,360.335846 
                         C714.359924,358.382385 713.083252,355.047729 717.035950,355.242462 
                         C720.858887,355.430878 719.479736,358.389771 719.578125,360.528931 
                         C719.599915,361.002319 719.754700,361.469574 719.931335,362.357117 
                         C722.178101,360.335602 724.057373,358.256897 726.299011,356.699768 
                         C733.320374,351.822418 740.912842,354.936401 741.684143,363.415161 
                         C742.108643,368.080933 740.804138,372.903992 740.146606,378.023956 
                       M728.829346,384.687103 
                         C734.876160,379.813904 736.475220,373.127380 735.803467,365.904755 
                         C735.608093,363.804260 733.834229,360.847321 732.066101,360.177460 
                         C730.283142,359.501892 727.053589,360.540680 725.430115,361.949097 
                         C720.894470,365.884064 718.525818,371.160309 717.950439,377.231720 
                         C717.191223,385.242615 720.339966,387.706970 728.829346,384.687103 
                       z"/>
                       <path fill="#1C70B8" opacity="1.000000" stroke="none" 
                         d="
                       M678.532715,362.618652 
                         C680.498535,360.565918 682.039429,358.501862 684.045593,357.107147 
                         C693.068298,350.834656 703.978577,355.681976 705.264893,366.578003 
                         C706.217651,374.648987 703.984680,381.829834 697.728821,387.288422 
                         C693.264465,391.183838 687.997009,392.418304 682.371460,390.109589 
                         C676.928223,387.875671 674.440735,383.114349 674.808716,377.713013 
                         C675.148682,372.723907 677.087463,367.843719 678.532715,362.618652 
                       M685.811890,362.113831 
                         C681.425354,366.659088 680.114685,372.354156 681.060852,378.233551 
                         C681.493774,380.923889 683.511780,384.224945 685.795654,385.544434 
                         C689.049133,387.424072 693.225769,385.936340 694.862427,382.643005 
                         C696.997253,378.347382 698.776611,373.474121 699.064331,368.749268 
                         C699.584290,360.209930 693.839478,357.262604 685.811890,362.113831 
                       z"/>
                       <path fill="#1E71B9" opacity="1.000000" stroke="none" 
                         d="
                       M457.482147,385.001160 
                         C462.925934,381.459717 462.925934,381.459717 465.628326,384.003082 
                         C461.508942,389.188354 456.149048,392.060394 449.640656,390.911865 
                         C446.518066,390.360809 442.855469,388.383789 441.005371,385.889557 
                         C433.234467,375.413055 441.865326,356.161713 454.735626,354.494720 
                         C462.590210,353.477356 468.636292,359.298340 466.083191,365.736725 
                         C465.247955,367.843018 463.261139,370.045502 461.233643,371.004059 
                         C457.682617,372.682953 453.671661,373.368652 449.896088,374.601257 
                         C447.851044,375.268890 444.267822,373.607208 444.379578,377.794525 
                         C444.485748,381.769897 445.922607,385.193817 450.294922,385.859894 
                         C452.483154,386.193298 454.841064,385.413055 457.482147,385.001160 
                       M461.067780,362.565125 
                         C459.478149,358.899506 456.316498,359.072968 453.433594,359.991089 
                         C448.371094,361.603424 446.166138,365.683472 445.030792,371.427582 
                         C449.289734,370.423553 453.149658,369.992767 456.561279,368.522064 
                         C458.479889,367.694946 459.658264,365.150818 461.067780,362.565125 
                       z"/>
                       <path fill="#1C70B8" opacity="1.000000" stroke="none" 
                         d="
                       M755.755981,357.656189 
                         C760.151794,356.574036 764.258972,355.015564 768.354370,355.045898 
                         C772.011353,355.072998 774.732483,357.898071 775.287598,361.835083 
                         C775.861328,365.904083 774.216003,369.272125 770.465332,370.833344 
                         C766.515442,372.477478 762.277100,373.449005 758.130737,374.590668 
                         C756.567627,375.021057 754.908997,375.104523 751.706299,375.583557 
                         C753.627136,379.255646 754.460938,382.989197 756.789917,384.806519 
                         C760.396240,387.620453 764.707520,386.201782 768.384705,383.698029 
                         C770.385742,382.335510 772.381287,380.018585 774.691895,384.877136 
                         C771.363098,386.776794 768.213135,389.357086 764.609070,390.479462 
                         C755.065918,393.451355 747.492981,387.843170 747.098389,377.857300 
                         C746.786377,369.961761 749.256531,363.102509 755.755981,357.656189 
                       M768.951782,366.327362 
                         C770.544861,361.699463 769.195068,359.602844 764.626648,359.609314 
                         C759.235596,359.616943 755.073975,364.109192 754.187927,371.890808 
                         C759.241882,370.119263 763.838989,368.507904 768.951782,366.327362 
                       z"/>
                       <path fill="#1D70B8" opacity="1.000000" stroke="none" 
                         d="
                       M584.679016,370.740234 
                         C578.832153,372.597198 573.301758,374.255066 567.111145,376.110809 
                         C566.643799,379.095947 566.977966,382.585907 570.192078,384.721680 
                         C574.073120,387.300629 578.152100,386.343628 581.913147,383.950531 
                         C583.984741,382.632355 586.023376,379.908386 588.676453,384.871277 
                         C585.196106,386.834198 582.028564,389.393372 578.415283,390.508636 
                         C568.903870,393.444366 561.375977,387.741486 560.984619,377.793335 
                         C560.718323,371.025269 562.229553,364.506744 567.332703,360.028442 
                         C570.479553,357.266937 574.976440,355.457855 579.148499,354.617401 
                         C583.229065,353.795349 587.167908,355.941803 588.741333,360.206726 
                         C590.306580,364.449280 588.860779,368.042694 584.679016,370.740234 
                       M570.370422,370.840637 
                         C574.013672,369.785767 577.817139,369.076843 581.219543,367.501770 
                         C582.537109,366.891907 583.861023,364.086060 583.507690,362.710907 
                         C583.168152,361.389893 580.749634,359.955627 579.093140,359.740967 
                         C573.934387,359.072571 567.760376,365.132812 568.041626,370.239563 
                         C568.056396,370.508362 569.028564,370.724457 570.370422,370.840637 
                       z"/>
                       <path fill="#1C70B8" opacity="1.000000" stroke="none" 
                         d="
                       M651.775208,385.636047 
                         C649.601807,387.204102 647.830994,388.836212 645.746521,389.761536 
                         C635.188843,394.448212 625.944214,388.409698 625.848755,376.898376 
                         C625.795654,370.494690 627.289856,364.352264 632.109375,360.108673 
                         C635.159302,357.423126 639.379639,355.481964 643.380737,354.610870 
                         C648.283875,353.543365 652.919189,356.971710 653.932739,360.995667 
                         C655.033813,365.367340 652.902771,369.667755 647.764038,371.579285 
                         C642.837402,373.411987 637.596802,374.400848 631.145020,376.120026 
                         C632.313416,378.886261 632.771912,382.802063 634.906433,384.254150 
                         C637.184265,385.803741 641.073914,385.375854 644.203552,385.120056 
                         C645.820923,384.987885 647.240356,383.179932 648.896729,382.476288 
                         C649.782043,382.100220 651.152344,382.157593 651.965881,382.617279 
                         C652.376404,382.849243 652.034729,384.412720 651.775208,385.636047 
                       M648.765503,363.509430 
                         C648.017822,359.484467 645.069824,359.179077 641.904114,359.674316 
                         C637.150085,360.418030 633.677795,364.934723 633.105530,371.324280 
                         C638.652344,369.317291 645.464050,371.079620 648.765503,363.509430 
                       z"/>
                       <path fill="#1E71B9" opacity="1.000000" stroke="none" 
                         d="
                       M602.780701,367.058716 
                         C603.922852,372.169647 604.982849,376.869843 606.274231,382.596222 
                         C610.358093,374.165009 614.207397,366.589417 617.693665,358.850311 
                         C619.235168,355.428192 621.317688,354.430359 625.193604,355.767426 
                         C619.650208,366.839417 614.238220,377.838409 608.619324,388.730682 
                         C607.317078,391.255188 603.033875,391.079956 602.343201,388.544434 
                         C599.384521,377.683197 596.667480,366.756165 593.852783,355.816223 
                         C598.297791,354.261902 600.595642,355.390656 601.127747,359.844666 
                         C601.402283,362.142212 602.159424,364.382080 602.780701,367.058716 
                       z"/>
                       <path fill="#1D70B8" opacity="1.000000" stroke="none" 
                         d="
                       M659.384644,386.937042 
                         C661.358154,371.027039 663.275635,355.531433 665.231262,339.727478 
                         C667.112732,339.727478 668.847778,339.727478 671.225403,339.727478 
                         C669.204773,356.499146 667.207397,373.078217 665.136597,390.266632 
                         C663.012878,389.095825 659.132629,393.281830 659.384644,386.937042 
                       z"/>
                       <path fill="#1D70B8" opacity="1.000000" stroke="none" 
                         d="
                       M795.228394,362.022827 
                         C790.334839,365.677795 788.700623,370.672333 787.911194,376.036041 
                         C787.237427,380.613983 786.750671,385.219482 786.151611,390.050842 
                         C784.151367,390.050842 782.405945,390.050842 780.182495,390.050842 
                         C781.496765,379.068237 782.752869,368.245850 784.162537,357.443451 
                         C784.269165,356.626556 785.511780,355.311279 786.149597,355.354706 
                         C787.235046,355.428680 788.610718,356.162445 789.213379,357.057373 
                         C789.849060,358.001465 789.722656,359.458679 790.008362,361.164612 
                         C794.076294,358.725586 796.582642,353.548187 802.494873,355.898956 
                         C802.270569,357.575989 802.058838,359.158875 801.843323,360.770386 
                         C799.659912,361.147766 797.610657,361.501953 795.228394,362.022827 
                       M790.017273,362.495605 
                         C789.821655,362.427521 789.626099,362.359467 789.430481,362.291382 
                         C789.497070,362.499908 789.563660,362.708435 790.017273,362.495605 
                       z"/>
                       <path fill="#FDFEFE" opacity="1.000000" stroke="none" 
                         d="
                       M272.507385,94.489410 
                         C284.922333,126.864777 297.182068,158.873810 309.430176,190.887283 
                         C311.487518,196.264603 313.494537,201.661163 315.768188,207.694687 
                         C283.683350,207.694687 252.503113,207.694687 220.453720,207.694687 
                         C236.597107,165.525543 252.542786,123.872910 268.603058,81.920921 
                         C269.866272,86.037071 271.107300,90.080818 272.507385,94.489410 
                       z"/>
                       <path fill="#F5F9FC" opacity="1.000000" stroke="none" 
                         d="
                       M616.208679,56.841850 
                         C690.654297,56.841782 764.627625,56.840755 838.601013,56.843361 
                         C846.108276,56.843624 846.762390,57.517384 846.762695,65.208115 
                         C846.764648,119.188690 846.765503,173.169266 846.761414,227.149841 
                         C846.760864,234.596603 845.820923,235.586685 838.502869,235.564514 
                         C809.684814,235.477173 780.866821,235.260895 752.048889,235.274506 
                         C707.069641,235.295776 662.090393,235.469620 617.111145,235.567474 
                         C608.926147,235.585281 608.275757,234.919022 608.275513,226.785477 
                         C608.273621,172.638306 608.270691,118.491119 608.278564,64.343941 
                         C608.279541,57.657333 608.993103,56.968838 616.208679,56.841850 
                       M804.500000,226.997696 
                         C810.666504,226.997269 816.833313,227.031891 822.999512,226.988525 
                         C833.172424,226.916992 838.137268,222.093369 838.145691,212.049088 
                         C838.182556,168.216461 838.179932,124.383789 838.145813,80.551163 
                         C838.137451,69.777069 833.391357,65.179680 822.480713,65.178467 
                         C759.148376,65.171432 695.815979,65.170944 632.483643,65.178879 
                         C621.635742,65.180237 616.905762,69.848930 616.902832,80.570801 
                         C616.890991,123.903458 616.894958,167.236115 616.899414,210.568771 
                         C616.900696,222.691071 621.249268,226.994675 633.502625,226.995621 
                         C690.168396,226.999985 746.834229,226.997635 804.500000,226.997696 
                       z"/>
                       <path fill="#F4F8FB" opacity="1.000000" stroke="none" 
                         d="
                       M700.940491,244.353531 
                         C717.992859,244.151169 734.656799,244.057587 751.319031,244.183273 
                         C752.751038,244.194061 754.956177,245.313324 755.479736,246.500763 
                         C762.450806,262.310059 769.185547,278.223572 776.201233,294.630432 
                         C743.689392,294.630432 711.670532,294.630432 678.706604,294.630432 
                         C686.043274,277.800903 693.297424,261.160645 700.940491,244.353531 
                       M702.621094,286.371460 
                         C720.091614,286.372040 737.562195,286.399780 755.032593,286.357788 
                         C760.784851,286.343933 762.320679,284.084167 760.151978,278.892090 
                         C757.078735,271.534851 753.843567,264.244934 750.805725,256.873444 
                         C749.579590,253.898056 747.753357,252.521027 744.385925,252.568192 
                         C733.240295,252.724380 722.089844,252.717911 710.943970,252.571442 
                         C707.449829,252.525528 705.426392,253.790482 704.127869,257.056427 
                         C701.428223,263.846130 698.457397,270.528381 695.575012,277.244965 
                         C692.386353,284.675415 693.447815,286.280212 702.621094,286.371460 
                       z"/>
                       <path fill="#F8FBFD" opacity="1.000000" stroke="none" 
                         d="
                       M547.002441,374.666534 
                         C544.583313,378.232330 542.747925,381.925476 539.899109,384.495178 
                         C536.078613,387.941437 531.660583,386.178009 530.690674,381.092743 
                         C529.343994,374.031982 530.830750,367.340820 536.099426,362.383728 
                         C538.018127,360.578461 541.750732,359.986359 544.610229,360.090576 
                         C547.658142,360.201660 549.579712,362.442017 548.730469,366.047485 
                         C548.089111,368.770416 547.658997,371.543060 547.002441,374.666534 
                       z"/>
                       <path fill="#FFFFFF" opacity="1.000000" stroke="none" 
                         d="
                       M545.916382,383.905212 
                         C546.006714,383.510712 546.308777,383.317169 546.610779,383.123657 
                         C546.676392,383.404144 546.742004,383.684662 546.693237,384.220947 
                         C546.428528,384.353210 546.278259,384.229675 545.916382,383.905212 
                       z"/>
                       <path fill="#FAFCFE" opacity="1.000000" stroke="none" 
                         d="
                       M481.769043,367.993866 
                         C482.191711,367.226288 482.397675,366.764252 482.684662,366.359741 
                         C485.295715,362.679443 487.918457,358.008148 493.252014,360.137756 
                         C498.277527,362.144440 497.481659,367.434906 496.632782,371.554779 
                         C495.850677,375.350830 494.162262,379.141388 492.086029,382.438812 
                         C489.985718,385.774536 486.347229,386.954285 482.406006,385.666260 
                         C479.703735,384.783173 477.604248,383.353973 478.645813,379.812469 
                         C479.760345,376.022827 480.619354,372.158051 481.769043,367.993866 
                       z"/>
                       <path fill="#FAFCFE" opacity="1.000000" stroke="none" 
                         d="
                       M728.485229,384.869568 
                         C720.339966,387.706970 717.191223,385.242615 717.950439,377.231720 
                         C718.525818,371.160309 720.894470,365.884064 725.430115,361.949097 
                         C727.053589,360.540680 730.283142,359.501892 732.066101,360.177460 
                         C733.834229,360.847321 735.608093,363.804260 735.803467,365.904755 
                         C736.475220,373.127380 734.876160,379.813904 728.485229,384.869568 
                       z"/>
                       <path fill="#FAFCFE" opacity="1.000000" stroke="none" 
                         d="
                       M686.105530,361.854553 
                         C693.839478,357.262604 699.584290,360.209930 699.064331,368.749268 
                         C698.776611,373.474121 696.997253,378.347382 694.862427,382.643005 
                         C693.225769,385.936340 689.049133,387.424072 685.795654,385.544434 
                         C683.511780,384.224945 681.493774,380.923889 681.060852,378.233551 
                         C680.114685,372.354156 681.425354,366.659088 686.105530,361.854553 
                       z"/>
                       <path fill="#F4F8FB" opacity="1.000000" stroke="none" 
                         d="
                       M461.118958,362.972656 
                         C459.658264,365.150818 458.479889,367.694946 456.561279,368.522064 
                         C453.149658,369.992767 449.289734,370.423553 445.030792,371.427582 
                         C446.166138,365.683472 448.371094,361.603424 453.433594,359.991089 
                         C456.316498,359.072968 459.478149,358.899506 461.118958,362.972656 
                       z"/>
                       <path fill="#F4F8FB" opacity="1.000000" stroke="none" 
                         d="
                       M768.693909,366.611938 
                         C763.838989,368.507904 759.241882,370.119263 754.187927,371.890808 
                         C755.073975,364.109192 759.235596,359.616943 764.626648,359.609314 
                         C769.195068,359.602844 770.544861,361.699463 768.693909,366.611938 
                       z"/>
                       <path fill="#F4F8FB" opacity="1.000000" stroke="none" 
                         d="
                       M569.962769,370.902863 
                         C569.028564,370.724457 568.056396,370.508362 568.041626,370.239563 
                         C567.760376,365.132812 573.934387,359.072571 579.093140,359.740967 
                         C580.749634,359.955627 583.168152,361.389893 583.507690,362.710907 
                         C583.861023,364.086060 582.537109,366.891907 581.219543,367.501770 
                         C577.817139,369.076843 574.013672,369.785767 569.962769,370.902863 
                       z"/>
                       <path fill="#F4F8FB" opacity="1.000000" stroke="none" 
                         d="
                       M648.725037,363.873230 
                         C645.464050,371.079620 638.652344,369.317291 633.105530,371.324280 
                         C633.677795,364.934723 637.150085,360.418030 641.904114,359.674316 
                         C645.069824,359.179077 648.017822,359.484467 648.725037,363.873230 
                       z"/>
                       <path fill="#FFFFFF" opacity="1.000000" stroke="none" 
                         d="
                       M789.823730,362.706299 
                         C789.563660,362.708435 789.497070,362.499908 789.430481,362.291382 
                         C789.626099,362.359467 789.821655,362.427521 789.823730,362.706299 
                       z"/>
                       <path fill="#176DB7" opacity="1.000000" stroke="none" 
                         d="
                       M804.000000,226.997696 
                         C746.834229,226.997635 690.168396,226.999985 633.502625,226.995621 
                         C621.249268,226.994675 616.900696,222.691071 616.899414,210.568771 
                         C616.894958,167.236115 616.890991,123.903458 616.902832,80.570801 
                         C616.905762,69.848930 621.635742,65.180237 632.483643,65.178879 
                         C695.815979,65.170944 759.148376,65.171432 822.480713,65.178467 
                         C833.391357,65.179680 838.137451,69.777069 838.145813,80.551163 
                         C838.179932,124.383789 838.182556,168.216461 838.145691,212.049088 
                         C838.137268,222.093369 833.172424,226.916992 822.999512,226.988525 
                         C816.833313,227.031891 810.666504,226.997269 804.000000,226.997696 
                       M814.486206,73.842537 
                         C754.179993,73.842445 693.873840,73.841637 633.567627,73.843155 
                         C625.983765,73.843346 625.298889,74.513588 625.297852,82.077415 
                         C625.291687,124.891502 625.291565,167.705582 625.297302,210.519669 
                         C625.298279,217.641434 626.101562,218.413574 633.438477,218.413925 
                         C696.076965,218.416840 758.715515,218.416504 821.354004,218.414261 
                         C828.911011,218.414001 829.577332,217.746246 829.578125,210.117371 
                         C829.582214,169.468979 829.558594,128.820572 829.589661,88.172203 
                         C829.602295,71.670059 830.356934,73.986954 814.486206,73.842537 
                       z"/>
                       <path fill="#136AB6" opacity="1.000000" stroke="none" 
                         d="
                       M702.140625,286.371887 
                         C693.447815,286.280212 692.386353,284.675415 695.575012,277.244965 
                         C698.457397,270.528381 701.428223,263.846130 704.127869,257.056427 
                         C705.426392,253.790482 707.449829,252.525528 710.943970,252.571442 
                         C722.089844,252.717911 733.240295,252.724380 744.385925,252.568192 
                         C747.753357,252.521027 749.579590,253.898056 750.805725,256.873444 
                         C753.843567,264.244934 757.078735,271.534851 760.151978,278.892090 
                         C762.320679,284.084167 760.784851,286.343933 755.032593,286.357788 
                         C737.562195,286.399780 720.091614,286.372040 702.140625,286.371887 
                       M707.119141,271.699219 
                         C706.348389,273.644318 705.577576,275.589417 704.756165,277.662415 
                         C720.134644,277.662415 734.979736,277.662415 750.308716,277.662415 
                         C748.387634,273.094208 746.484375,269.061035 744.999817,264.879242 
                         C743.857727,261.662170 741.954468,260.716339 738.632690,260.904663 
                         C733.326111,261.205566 727.989990,260.985474 722.666321,260.985504 
                         C711.671997,260.985565 711.671997,260.985504 707.119141,271.699219 
                       z"/>
                       <path fill="#FCFDFE" opacity="1.000000" stroke="none" 
                         d="
                       M814.983032,73.842506 
                         C830.356934,73.986954 829.602295,71.670059 829.589661,88.172203 
                         C829.558594,128.820572 829.582214,169.468979 829.578125,210.117371 
                         C829.577332,217.746246 828.911011,218.414001 821.354004,218.414261 
                         C758.715515,218.416504 696.076965,218.416840 633.438477,218.413925 
                         C626.101562,218.413574 625.298279,217.641434 625.297302,210.519669 
                         C625.291565,167.705582 625.291687,124.891502 625.297852,82.077415 
                         C625.298889,74.513588 625.983765,73.843346 633.567627,73.843155 
                         C693.873840,73.841637 754.179993,73.842445 814.983032,73.842506 
                       M753.968628,115.609573 
                         C741.083313,94.035591 722.250000,81.857307 696.967468,82.254570 
                         C659.350525,82.845665 632.104980,113.084419 634.081055,150.776367 
                         C636.369385,194.424774 684.937378,223.152771 724.465393,204.208160 
                         C757.818298,188.223145 771.169861,149.467346 753.968628,115.609573 
                       M798.995544,194.507523 
                         C797.451355,192.991470 796.147522,190.885895 794.293396,190.129654 
                         C792.535034,189.412491 790.200195,190.108917 788.118896,190.183701 
                         C788.224609,192.135864 787.623352,194.590759 788.580811,195.937256 
                         C790.677795,198.886139 793.586060,201.252853 796.124084,203.894775 
                         C798.794678,206.674774 801.249207,206.302063 803.807861,203.662933 
                         C808.676331,198.641281 813.620850,193.692841 818.565430,188.745605 
                         C820.724915,186.584991 822.523621,184.279663 819.783813,181.493149 
                         C817.018066,178.680313 814.779541,180.515427 812.571289,182.659393 
                         C808.306580,186.799942 803.926819,190.822037 798.995544,194.507523 
                       M807.817383,136.313293 
                         C805.259705,138.893448 802.701965,141.473602 799.973389,144.226151 
                         C797.904358,142.259506 796.363098,140.105148 794.268066,139.029984 
                         C792.704773,138.227676 790.425903,138.819748 788.465698,138.790863 
                         C788.461304,140.857040 787.641479,143.503601 788.616089,144.872986 
                         C790.901855,148.084564 793.808228,151.000824 796.959900,153.378525 
                         C798.238281,154.342987 801.601379,154.457397 802.659363,153.484085 
                         C808.649414,147.973434 814.376892,142.148911 819.806824,136.084717 
                         C820.762451,135.017426 820.636230,131.560349 819.645996,130.568878 
                         C818.643494,129.565109 815.557068,129.545059 814.087097,130.361237 
                         C811.846497,131.605377 810.211548,133.940323 807.817383,136.313293 
                       M787.688904,93.123962 
                         C788.180115,95.056969 788.184998,97.341621 789.271545,98.844147 
                         C791.102966,101.376801 793.727417,103.318497 795.822693,105.682121 
                         C798.591492,108.805420 801.109375,108.460152 803.841064,105.667320 
                         C808.614563,100.786942 813.462952,95.979660 818.295471,91.157333 
                         C820.552490,88.904991 822.680969,86.360855 819.663513,83.520973 
                         C816.643127,80.678223 814.228943,83.090530 812.050903,85.319008 
                         C808.118408,89.342499 804.171631,93.351913 799.295532,98.320084 
                         C797.625305,96.112915 796.458252,94.276398 794.999207,92.712341 
                         C792.869324,90.429184 790.475525,90.050285 787.688904,93.123962 
                       z"/>
                       <path fill="#FAFCFE" opacity="1.000000" stroke="none" 
                         d="
                       M707.278809,271.343750 
                         C711.671997,260.985504 711.671997,260.985565 722.666321,260.985504 
                         C727.989990,260.985474 733.326111,261.205566 738.632690,260.904663 
                         C741.954468,260.716339 743.857727,261.662170 744.999817,264.879242 
                         C746.484375,269.061035 748.387634,273.094208 750.308716,277.662415 
                         C734.979736,277.662415 720.134644,277.662415 704.756165,277.662415 
                         C705.577576,275.589417 706.348389,273.644318 707.278809,271.343750 
                       z"/>
                       <path fill="#156CB6" opacity="1.000000" stroke="none" 
                         d="
                       M754.148315,115.934250 
                         C771.169861,149.467346 757.818298,188.223145 724.465393,204.208160 
                         C684.937378,223.152771 636.369385,194.424774 634.081055,150.776367 
                         C632.104980,113.084419 659.350525,82.845665 696.967468,82.254570 
                         C722.250000,81.857307 741.083313,94.035591 754.148315,115.934250 
                       M719.105957,95.076088 
                         C718.837097,95.182121 718.568298,95.288162 718.299438,95.394241 
                         C718.511780,95.614899 718.724182,95.835548 719.057251,96.750336 
                         C727.727051,110.371414 731.607849,125.478241 732.481323,141.592148 
                         C739.453918,141.592148 746.000916,141.592148 752.553528,141.592148 
                         C752.021301,122.246254 737.595581,102.173019 719.105957,95.076088 
                       M702.037048,154.718445 
                         C702.037048,169.705353 702.037048,184.692261 702.037048,199.951828 
                         C714.838989,194.592606 725.612976,162.841553 723.008301,150.238800 
                         C716.967651,150.238800 710.838074,150.086990 704.731812,150.396896 
                         C703.778687,150.445282 702.932312,152.596848 702.037048,154.718445 
                       M714.958984,106.635117 
                         C711.871338,101.007637 708.596191,95.549393 702.442383,92.302475 
                         C702.442383,109.026222 702.442383,125.323700 702.442383,141.541077 
                         C709.745239,141.541077 716.637695,141.541077 723.855408,141.541077 
                         C723.313416,129.281097 720.785950,117.934891 714.958984,106.635117 
                       M664.932983,190.608963 
                         C669.105957,193.143448 673.278870,195.677933 677.451843,198.212418 
                         C669.045105,183.120041 664.522217,167.427383 663.802002,150.523941 
                         C656.621399,150.523941 649.872009,150.523941 642.686401,150.523941 
                         C643.924927,167.322586 651.573486,180.132614 664.932983,190.608963 
                       M665.182007,128.728210 
                         C667.075073,116.673447 671.573364,105.578804 678.192993,94.902084 
                         C660.006104,99.271095 641.563354,124.177872 643.255432,141.605865 
                         C649.980408,141.605865 656.719055,141.605865 663.562927,141.605865 
                         C664.086182,137.428741 664.577454,133.507355 665.182007,128.728210 
                       M693.328613,167.501373 
                         C693.328613,161.900284 693.328613,156.299179 693.328613,150.563324 
                         C686.121887,150.563324 679.557861,150.563324 673.038269,150.563324 
                         C671.131531,166.091415 682.957214,195.969543 693.328796,198.916336 
                         C693.328796,188.689240 693.328796,178.594986 693.328613,167.501373 
                       M732.233521,151.964828 
                         C731.658264,168.115417 727.001404,183.028336 718.189575,196.930389 
                         C735.719299,192.403000 752.298767,169.906036 752.524231,149.909256 
                         C745.817017,150.307175 739.146912,150.702881 732.233521,151.964828 
                       M674.015320,127.686554 
                         C673.473755,132.236023 672.932129,136.785507 672.360779,141.585388 
                         C679.752380,141.585388 686.323364,141.585388 692.964844,141.585388 
                         C692.964844,125.288673 692.964844,109.284004 692.964844,92.379349 
                         C681.438293,101.709511 677.367432,114.044731 674.015320,127.686554 
                       z"/>
                       <path fill="#176DB7" opacity="1.000000" stroke="none" 
                         d="
                       M799.295166,194.700378 
                         C803.926819,190.822037 808.306580,186.799942 812.571289,182.659393 
                         C814.779541,180.515427 817.018066,178.680313 819.783813,181.493149 
                         C822.523621,184.279663 820.724915,186.584991 818.565430,188.745605 
                         C813.620850,193.692841 808.676331,198.641281 803.807861,203.662933 
                         C801.249207,206.302063 798.794678,206.674774 796.124084,203.894775 
                         C793.586060,201.252853 790.677795,198.886139 788.580811,195.937256 
                         C787.623352,194.590759 788.224609,192.135864 788.118896,190.183701 
                         C790.200195,190.108917 792.535034,189.412491 794.293396,190.129654 
                         C796.147522,190.885895 797.451355,192.991470 799.295166,194.700378 
                       z"/>
                       <path fill="#166CB6" opacity="1.000000" stroke="none" 
                         d="
                       M808.068420,136.062683 
                         C810.211548,133.940323 811.846497,131.605377 814.087097,130.361237 
                         C815.557068,129.545059 818.643494,129.565109 819.645996,130.568878 
                         C820.636230,131.560349 820.762451,135.017426 819.806824,136.084717 
                         C814.376892,142.148911 808.649414,147.973434 802.659363,153.484085 
                         C801.601379,154.457397 798.238281,154.342987 796.959900,153.378525 
                         C793.808228,151.000824 790.901855,148.084564 788.616089,144.872986 
                         C787.641479,143.503601 788.461304,140.857040 788.465698,138.790863 
                         C790.425903,138.819748 792.704773,138.227676 794.268066,139.029984 
                         C796.363098,140.105148 797.904358,142.259506 799.973389,144.226151 
                         C802.701965,141.473602 805.259705,138.893448 808.068420,136.062683 
                       z"/>
                       <path fill="#166CB6" opacity="1.000000" stroke="none" 
                         d="
                       M787.884460,92.793579 
                         C790.475525,90.050285 792.869324,90.429184 794.999207,92.712341 
                         C796.458252,94.276398 797.625305,96.112915 799.295532,98.320084 
                         C804.171631,93.351913 808.118408,89.342499 812.050903,85.319008 
                         C814.228943,83.090530 816.643127,80.678223 819.663513,83.520973 
                         C822.680969,86.360855 820.552490,88.904991 818.295471,91.157333 
                         C813.462952,95.979660 808.614563,100.786942 803.841064,105.667320 
                         C801.109375,108.460152 798.591492,108.805420 795.822693,105.682121 
                         C793.727417,103.318497 791.102966,101.376801 789.271545,98.844147 
                         C788.184998,97.341621 788.180115,95.056969 787.884460,92.793579 
                       z"/>
                       <path fill="#F8FBFD" opacity="1.000000" stroke="none" 
                         d="
                       M702.036865,154.247162 
                         C702.932312,152.596848 703.778687,150.445282 704.731812,150.396896 
                         C710.838074,150.086990 716.967651,150.238800 723.008301,150.238800 
                         C725.612976,162.841553 714.838989,194.592606 702.037048,199.951828 
                         C702.037048,184.692261 702.037048,169.705353 702.036865,154.247162 
                       z"/>
                       <path fill="#F9FBFD" opacity="1.000000" stroke="none" 
                         d="
                       M715.078979,106.987701 
                         C720.785950,117.934891 723.313416,129.281097 723.855408,141.541077 
                         C716.637695,141.541077 709.745239,141.541077 702.442383,141.541077 
                         C702.442383,125.323700 702.442383,109.026222 702.442383,92.302475 
                         C708.596191,95.549393 711.871338,101.007637 715.078979,106.987701 
                       z"/>
                       <path fill="#F8FBFD" opacity="1.000000" stroke="none" 
                         d="
                       M664.653259,190.384842 
                         C651.573486,180.132614 643.924927,167.322586 642.686401,150.523941 
                         C649.872009,150.523941 656.621399,150.523941 663.802002,150.523941 
                         C664.522217,167.427383 669.045105,183.120041 677.451843,198.212418 
                         C673.278870,195.677933 669.105957,193.143448 664.653259,190.384842 
                       z"/>
                       <path fill="#F9FBFD" opacity="1.000000" stroke="none" 
                         d="
                       M665.125366,129.157104 
                         C664.577454,133.507355 664.086182,137.428741 663.562927,141.605865 
                         C656.719055,141.605865 649.980408,141.605865 643.255432,141.605865 
                         C641.563354,124.177872 660.006104,99.271095 678.192993,94.902084 
                         C671.573364,105.578804 667.075073,116.673447 665.125366,129.157104 
                       z"/>
                       <path fill="#FAFCFE" opacity="1.000000" stroke="none" 
                         d="
                       M693.328735,168.001053 
                         C693.328796,178.594986 693.328796,188.689240 693.328796,198.916336 
                         C682.957214,195.969543 671.131531,166.091415 673.038269,150.563324 
                         C679.557861,150.563324 686.121887,150.563324 693.328613,150.563324 
                         C693.328613,156.299179 693.328613,161.900284 693.328735,168.001053 
                       z"/>
                       <path fill="#F8FBFD" opacity="1.000000" stroke="none" 
                         d="
                       M732.355164,151.531708 
                         C739.146912,150.702881 745.817017,150.307175 752.524231,149.909256 
                         C752.298767,169.906036 735.719299,192.403000 718.189575,196.930389 
                         C727.001404,183.028336 731.658264,168.115417 732.355164,151.531708 
                       z"/>
                       <path fill="#FCFDFE" opacity="1.000000" stroke="none" 
                         d="
                       M674.071167,127.261932 
                         C677.367432,114.044731 681.438293,101.709511 692.964844,92.379349 
                         C692.964844,109.284004 692.964844,125.288673 692.964844,141.585388 
                         C686.323364,141.585388 679.752380,141.585388 672.360779,141.585388 
                         C672.932129,136.785507 673.473755,132.236023 674.071167,127.261932 
                       z"/>
                       <path fill="#F9FBFD" opacity="1.000000" stroke="none" 
                         d="
                       M719.510193,95.331619 
                         C737.595581,102.173019 752.021301,122.246254 752.553528,141.592148 
                         C746.000916,141.592148 739.453918,141.592148 732.481323,141.592148 
                         C731.607849,125.478241 727.727051,110.371414 719.157654,96.235832 
                         C719.258057,95.721329 719.510193,95.331619 719.510193,95.331619 
                       z"/>
                       <path fill="#F9FBFD" opacity="1.000000" stroke="none" 
                         d="
                       M719.097290,95.888763 
                         C718.724182,95.835548 718.511780,95.614899 718.299438,95.394226 
                         C718.568298,95.288162 718.837097,95.182121 719.308105,95.203857 
                         C719.510193,95.331619 719.258057,95.721329 719.097290,95.888763 
                       z"/>
                       </svg>
                          <tbody>
                            <tr>
                              <td
                                style="overflow-wrap:break-word;word-break:break-word;padding:15px;font-family:'Lato',sans-serif;"
                                align="left">
  
                                <table height="0px" align="center" border="0" cellpadding="0" cellspacing="0" width="100%"
                                  style="border-collapse: collapse;table-layout: fixed;border-spacing: 0;mso-table-lspace: 0pt;mso-table-rspace: 0pt;vertical-align: top;border-top: 1px solid #f9f9f9;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%">
                                  <tbody>
                                    <tr style="vertical-align: top">
                                      <td
                                        style="word-break: break-word;border-collapse: collapse !important;vertical-align: top;font-size: 0px;line-height: 0px;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%">
                                        <span>&#160;</span>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
  
                              </td>
                            </tr>
                          </tbody>
                        </table>
  
                        <!--[if (!mso)&(!IE)]><!-->
                      </div><!--<![endif]-->
                    </div>
                  </div>
                 
                </div>
              </div>
            </div>
  
  
  
  
  
            <div class="u-row-container" style="padding: 0px;background-color: transparent">
              <div class="u-row"
                style="margin: 0 auto;min-width: 320px;max-width: 600px;overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;background-color: #ffffff;">
                <div
                  style="border-collapse: collapse;display: table;width: 100%;height: 100%;background-color: transparent;">
                 
                  <div class="u-col u-col-100"
                    style="max-width: 320px;min-width: 600px;display: table-cell;vertical-align: top;">
                    <div style="height: 100%;width: 100% !important;">
                      <!--[if (!mso)&(!IE)]><!-->
                      <div
                        style="box-sizing: border-box; height: 100%; padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;">
                        <!--<![endif]-->
  
                        <table style="font-family:'Lato',sans-serif;" role="presentation" cellpadding="0" cellspacing="0"
                          width="100%" border="0">
                          <tbody>
                            <tr>
                              <td
                                style="overflow-wrap:break-word;word-break:break-word;padding:25px 10px;font-family:'Lato',sans-serif;"
                                align="left">
  
                                <table width="100%" cellpadding="0" cellspacing="0" border="0">
                                  <tr>
                                    <td style="padding-right: 0px;padding-left: 0px;" align="center">
  
                                      <img align="center" border="0" src="images/image-2.jpeg" alt="Image" title="Image"
                                        style="outline: none;text-decoration: none;-ms-interpolation-mode: bicubic;clear: both;display: inline-block !important;border: none;height: auto;float: none;width: 0%;max-width: 0px;" />
  
                                    </td>
                                  </tr>
                                </table>
  
                              </td>
                            </tr>
                          </tbody>
                        </table>
  
                       
                      </div>
                    
                    </div>
                  </div>
  
                </div>
              </div>
            </div>
  
  
  
  
  
            <div class="u-row-container" style="padding: 0px;background-color: transparent">
              <div class="u-row"
                style="margin: 0 auto;min-width: 320px;max-width: 600px;overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;background-color: #0e67b4;">
                <div
                  style="border-collapse: collapse;display: table;width: 100%;height: 100%;background-color: transparent;">
  
                  <div class="u-col u-col-100"
                    style="max-width: 320px;min-width: 600px;display: table-cell;vertical-align: top;">
                    <div style="height: 100%;width: 100% !important;">
                      <!--[if (!mso)&(!IE)]><!-->
                      <div
                        style="box-sizing: border-box; height: 100%; padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;">
                        <!--<![endif]-->
  
                        <table style="font-family:'Lato',sans-serif;" role="presentation" cellpadding="0" cellspacing="0"
                          width="100%" border="0">
                          <tbody>
                            <tr>
                              <td
                                style="overflow-wrap:break-word;word-break:break-word;padding:35px 10px 10px;font-family:'Lato',sans-serif;"
                                align="left">
  
                                <table width="100%" cellpadding="0" cellspacing="0" border="0">
                                  <tr>
                                    <td style="padding-right: 0px;padding-left: 0px;" align="center">
  
                                    </td>
                                  </tr>
                                </table>
  
                              </td>
                            </tr>
                          </tbody>
                        </table>
  
                        <table style="font-family:'Lato',sans-serif;" role="presentation" cellpadding="0" cellspacing="0"
                          width="100%" border="0">
                          <tbody>
                            <tr>
                              <td
                                style="overflow-wrap:break-word;word-break:break-word;padding:0px 10px 30px;font-family:'Lato',sans-serif;"
                                align="left">
  
                                <div style="font-size: 14px; line-height: 140%; text-align: left; word-wrap: break-word;">
                                  <p style="font-size: 14px; line-height: 140%; text-align: center;">
                                          
                                  <span
                                      style="font-size: 18px; line-height: 25.2px; color: #ecf0f1;"><strong>الرجاء استخدام
                                        عنوان الرابط أدناه لإعادة تعيين كلمة المرور الخاصة بك</strong></span></p>
                                </div>
  
                              </td>
                            </tr>
                          </tbody>
                        </table>
  
                      </div>=
                    </div>
                  </div>
  
                </div>
              </div>
            </div>
  
  
  
  
  
            <div class="u-row-container" style="padding: 0px;background-color: transparent">
              <div class="u-row"
                style="margin: 0 auto;min-width: 320px;max-width: 600px;overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;background-color: #ffffff;">
                <div
                  style="border-collapse: collapse;display: table;width: 100%;height: 100%;background-color: transparent;">
                 
                  <div class="u-col u-col-100"
                    style="max-width: 320px;min-width: 600px;display: table-cell;vertical-align: top;">
                    <div style="height: 100%;width: 100% !important;">
                      <!--[if (!mso)&(!IE)]><!-->
                      <div
                        style="box-sizing: border-box; height: 100%; padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;">
                        <!--<![endif]-->
  
                        <table style="font-family:'Lato',sans-serif;" role="presentation" cellpadding="0" cellspacing="0"
                          width="100%" border="0">
                          <tbody>
                            <tr>
                              <td
                                style="overflow-wrap:break-word;word-break:break-word;padding:40px 40px 30px;font-family:'Lato',sans-serif;"
                                align="left">
  
                                <div style="font-size: 14px; line-height: 140%; text-align: left; word-wrap: break-word;">
                                  <p style="line-height: 140%; text-align: right;">${user.name} مرحبًا </p>
                                  <p style="line-height: 140%; text-align: right;"> </p>
                                  <p style="line-height: 140%; text-align: right;"> لقد أرسلنا إليك هذا البريد  الإلكتروني ردًا على طلبك لإعادة تعيين كلمة المرور الخاصة بك   </p>
                                  <p style="line-height: 140%; text-align: right;"> </p>
                                  <p style="line-height: 140%; text-align: right;"><br />لإعادة تعيين كلمة المرور الخاصة
                                    بك، يرجى اتباع الرابط أدناه</p>
                                </div>
  
                              </td>
                            </tr>
                          </tbody>
                        </table>
  
                        <table style="font-family:'Lato',sans-serif;" role="presentation" cellpadding="0" cellspacing="0"
                          width="100%" border="0">
                          <tbody>
                            <tr>
                              <td
                                style="overflow-wrap:break-word;word-break:break-word;padding:0px 40px;font-family:'Lato',sans-serif;"
                                align="left">
  
                                <div align="left">
                                  
                                  <a href=${resetUrl} target="_blank" class="v-button"
                                    style="box-sizing: border-box;display: inline-block;text-decoration: none;-webkit-text-size-adjust: none;text-align: center;color: #FFFFFF; background-color: #0e67b4; border-radius: 1px;-webkit-border-radius: 1px; -moz-border-radius: 1px; width:auto; max-width:100%; overflow-wrap: break-word; word-break: break-word; word-wrap:break-word; mso-border-alt: none;font-size: 14px;">
                                    <span style="display:block;padding:15px 40px;line-height:120%;"><span
                                        style="font-family: Anton; line-height: 19.2px; font-size: 16px;"><strong>إعادة
                                          تعيين كلمة المرور</strong></span></span>
                                  </a>
                                
                                </div>
  
                              </td>
                            </tr>
                          </tbody>
                        </table>
  
                        <table style="font-family:'Lato',sans-serif;" role="presentation" cellpadding="0" cellspacing="0"
                          width="100%" border="0">
                          <tbody>
                            <tr>
                              <td
                                style="overflow-wrap:break-word;word-break:break-word;padding:40px 40px 30px;font-family:'Lato',sans-serif;"
                                align="left">
  
                                <div style="font-size: 14px; line-height: 140%; text-align: left; word-wrap: break-word;">
                                  <p style="font-size: 14px; line-height: 140%; text-align: right;"><span
                                      style="font-size: 16px; line-height: 22.4px;">يرجى تجاهل هذا البريد الإلكتروني إذا
                                      لم تطلب تغيير كلمة المرور.</span></p>
                                </div>
  
                              </td>
                            </tr>
                          </tbody>
                        </table>
  
                 
                      </div><!--<![endif]-->
                    </div>
                  </div>
                 
                </div>
              </div>
            </div>
  
  
  
  
  
            <div class="u-row-container" style="padding: 0px;background-color: transparent">
              <div class="u-row"
                style="margin: 0 auto;min-width: 320px;max-width: 600px;overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;background-color:#0e67b4;">
                
                  <div class="u-col u-col-50"
                    style="max-width: 320px;min-width: 300px;display: table-cell;vertical-align: top;">
                    <div style="height: 100%;width: 100% !important;">
                      <!--[if (!mso)&(!IE)]><!-->
                      <div
                        style="box-sizing: border-box; height: 100%; padding: 20px 20px 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;">
                        <!--<![endif]-->
  
                        <table style="font-family:'Lato',sans-serif;" role="presentation" cellpadding="0" cellspacing="0"
          width="100%" >
                          <tbody>
                            <tr>
                              <td
                                style="overflow-wrap:break-word;word-break:break-word;padding:10px;font-family:'Lato',sans-serif;"
                                align="left">
  
                                <div style="font-size: 14px; line-height: 140%; text-align: left; word-wrap: break-word;">
                                  <p style="line-height: 140%; font-size: 14px;"><span
                                      style="font-size: 14px; line-height: 19.6px;"><span
                                        style="color: #ecf0f1; font-size: 14px; line-height: 19.6px;">IEM ©  All Rights
                                        Reserved</span></span></p>
                                </div>
  
                              </td>
                            </tr>
                          </tbody>
                        </table>
  
                        <!--[if (!mso)&(!IE)]><!-->
                      </div><!--<![endif]-->
                    </div>
                  </div>
                 
                  <div class="u-col u-col-50"
                    style="max-width: 320px;min-width: 300px;display: table-cell;vertical-align: top;">
                    <div style="height: 100%;width: 100% !important;">
            
                      <div
                        style="box-sizing: border-box; height: 100%; padding: 0px 0px 0px 20px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;">
                        <!--<![endif]-->
  
             
                      </div><!--<![endif]-->
                    </div>
                  </div>
                
                </div>
              </div>
            </div>
  
  
  
  
  
            <div class="u-row-container" style="padding: 0px;background-color: #f9f9f9">
              <div class="u-row"
                style="margin: 0 auto;min-width: 320px;max-width: 600px;overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;background-color: #0e67b4;">
                <div
                  style="border-collapse: collapse;display: table;width: 100%;height: 100%;background-color: transparent;">
              
                  <div class="u-col u-col-100"
                    style="max-width: 320px;min-width: 600px;display: table-cell;vertical-align: top;">
                    <div style="height: 100%;width: 100% !important;">
                      <!--[if (!mso)&(!IE)]><!-->
                      <div
                        style="box-sizing: border-box; height: 100%; padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;">
                        <!--<![endif]-->
  
                        <table style="font-family:'Lato',sans-serif;" role="presentation" cellpadding="0" cellspacing="0"
                          width="100%" border="0">
                          <tbody>
                            <tr>
                              <td
                                style="overflow-wrap:break-word;word-break:break-word;padding:15px;font-family:'Lato',sans-serif;"
                                align="left">
  
                                <table height="0px" align="center" border="0" cellpadding="0" cellspacing="0" width="100%"
                                  style="border-collapse: collapse;table-layout: fixed;border-spacing: 0;mso-table-lspace: 0pt;mso-table-rspace: 0pt;vertical-align: top;border-top: 1px solid hsl(0, 0%, 100%);-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%">
                                  <tbody>
                                    <tr style="vertical-align: top">
                                      <td
                                        style="word-break: break-word;border-collapse: collapse !important;vertical-align: top;font-size: 0px;line-height: 0px;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%">
                                        <span>&#160;</span>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
  
                              </td>
                            </tr>
                          </tbody>
                        </table>
  
                        <!--[if (!mso)&(!IE)]><!-->
                      </div><!--<![endif]-->
                    </div>
                  </div>
                  <!--[if (mso)|(IE)]></td><![endif]-->
                  <!--[if (mso)|(IE)]></tr></table></td></tr></table><![endif]-->
                </div>
              </div>
            </div>
  
  
  
  
  
            <div class="u-row-container" style="padding: 0px;background-color: transparent">
              <div class="u-row"
                style="margin: 0 auto;min-width: 320px;max-width: 600px;overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;background-color: #f9f9f9;">
                <div
                  style="border-collapse: collapse;display: table;width: 100%;height: 100%;background-color: transparent;">
                 
                  <div class="u-col u-col-100"
                    style="max-width: 320px;min-width: 600px;display: table-cell;vertical-align: top;">
                    <div style="height: 100%;width: 100% !important;">
                 <div
                        style="box-sizing: border-box; height: 100%; padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;">
                   
  
                        <table style="font-family:'Lato',sans-serif;" role="presentation" cellpadding="0" cellspacing="0"
                          width="100%" border="0">
                          <tbody>
                            <tr>
                              <td
                                style="overflow-wrap:break-word;word-break:break-word;padding:0px 40px 30px 20px;font-family:'Lato',sans-serif;"
                                align="left">
  
                                <div style="font-size: 14px; line-height: 140%; text-align: left; word-wrap: break-word;">
  
                                </div>
  
                              </td>
                            </tr>
                          </tbody>
                        </table>
  
                      </div><!--<![endif]-->
                    </div>
                  </div>
  
                </div>
              </div>
            </div>
  
  
  
          </td>
        </tr>
      </tbody>
    </table>
  
  </body>
  
  </html>`;

  const subject = "طلب إعادة تعيين كلمة المرور";
  const send_to = user.email;
  const sent_from = process.env.EMAIL_USER;

  try {
    await sendEmail(subject, message, send_to, sent_from);
    res.status(200).json({ success: true, message: "Reset Email Sent" });
  } catch (error) {
    res.status(500);
    throw new Error("Email not sent. please try agein");
  }
});

//Reset Password
const resetPassword = asyncHandler(async (req, res) => {
  const { password } = req.body;
  const { resetToken } = req.params;
  //hash token, then copare to token in db
  const hasedToken = crypto
    .createHash("sha256")
    .update(resetToken)
    .digest("hex");

  //find token in db
  const userToken = await Token.findOne({
    token: hasedToken,
    expiresAt: { $gt: Date.now() },
  });

  if (!userToken) {
    res.status(404);
    throw new Error("Invalid or Expired Token");
  }

  //Find user
  const user = await User.findOne({ _id: userToken.userId });
  user.password = password;
  await user.save();
  res.status(200).json({ message: "Password Reset Successful, Please Login" });
});

module.exports = {
  registerUser,
  loginUser,
  logout,
  getUser,
  loggedinStatus,
  updateUser,
  changePassword,
  forgotPassword,
  resetPassword,
};
